<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>merkledag.store.cache documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Merkledag-core</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merkledag</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></div></li><li class="depth-3 branch"><a href="merkledag.codec.cbor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cbor</span></div></a></li><li class="depth-3 branch"><a href="merkledag.codec.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-3"><a href="merkledag.codec.node-v1.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>node-v1</span></div></a></li><li class="depth-2 branch"><a href="merkledag.link.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>link</span></div></a></li><li class="depth-2 branch"><a href="merkledag.node.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>node</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></div></li><li class="depth-3 branch"><a href="merkledag.store.block.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>block</span></div></a></li><li class="depth-3 current"><a href="merkledag.store.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="merkledag.store.cache.html#var-cache-size"><div class="inner"><span>cache-size</span></div></a></li><li class="depth-1"><a href="merkledag.store.cache.html#var-cacheable.3F"><div class="inner"><span>cacheable?</span></div></a></li><li class="depth-1"><a href="merkledag.store.cache.html#var-node-cache"><div class="inner"><span>node-cache</span></div></a></li><li class="depth-1"><a href="merkledag.store.cache.html#var-reap"><div class="inner"><span>reap</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">merkledag.store.cache</h1><div class="doc"><pre class="plaintext">Cache implementation which stores parsed node values, limited based on the
size of the blocks cached.</pre></div><div class="public anchor" id="var-cache-size"><h3>cache-size</h3><div class="usage"><code>(cache-size cache)</code></div><div class="doc"><pre class="plaintext">Return the sum of the sizes of nodes stored in the cache.
</pre></div></div><div class="public anchor" id="var-cacheable.3F"><h3>cacheable?</h3><div class="usage"><code>(cacheable? cache node)</code></div><div class="doc"><pre class="plaintext">Determine whether the given node should be cached.
</pre></div></div><div class="public anchor" id="var-node-cache"><h3>node-cache</h3><div class="usage"><code>(node-cache base &amp; {:as opts})</code></div><div class="doc"><pre class="plaintext">Create a new empty cache which will store nodes in memory up to the given
total size limit given. Note that nodes don't actually take up the same
amount of memory as their backing blocks, but it is a useful proxy for their
data size.

Note: this constructor does not perform an initial reaping, so it is possible
to create a cache with more nodes stored than the limit permits.

Options may include:

- `:total-size-limit` limit the total size of nodes stored in the cache
- `:node-size-limit` if set, prevent the caching of nodes larger than this</pre></div></div><div class="public anchor" id="var-reap"><h3>reap</h3><div class="usage"><code>(reap cache target-free)</code></div><div class="doc"><pre class="plaintext">Given a target amount of space to free and a node cache, evicts nodes from
the cache to free up the desired amount of space. Returns the updated cache.</pre></div></div></div></body></html>
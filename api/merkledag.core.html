<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>merkledag.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Merkledag-core</span> <span class="project-version">0.4.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>merkledag</span></div></div></li><li class="depth-2 branch"><a href="merkledag.cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cache</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></div></li><li class="depth-3 branch"><a href="merkledag.codec.cbor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cbor</span></div></a></li><li class="depth-3"><a href="merkledag.codec.edn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>edn</span></div></a></li><li class="depth-2 branch current"><a href="merkledag.core.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="merkledag.link.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>link</span></div></a></li><li class="depth-2 branch"><a href="merkledag.node.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>node</span></div></a></li><li class="depth-2"><a href="merkledag.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="merkledag.core.html#var-delete-node.21"><div class="inner"><span>delete-node!</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-get-data"><div class="inner"><span>get-data</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-get-links"><div class="inner"><span>get-links</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-get-node"><div class="inner"><span>get-node</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-init-store"><div class="inner"><span>init-store</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-link"><div class="inner"><span>link</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-link.3F"><div class="inner"><span>link?</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-node*"><div class="inner"><span>node*</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-store-node.21"><div class="inner"><span>store-node!</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-update-link"><div class="inner"><span>update-link</span></div></a></li><li class="depth-1"><a href="merkledag.core.html#var-update-node"><div class="inner"><span>update-node</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">merkledag.core</h1><div class="doc"><div class="markdown"><p>Core library API.</p></div></div><div class="public anchor" id="var-delete-node.21"><h3>delete-node!</h3><div class="usage"><code>(delete-node! store id)</code></div><div class="doc"><div class="markdown"><p>Remove a node from the store.</p>
<p>The id may be any <code>link/Target</code> value.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L175">view source</a></div></div><div class="public anchor" id="var-get-data"><h3>get-data</h3><div class="usage"><code>(get-data store id)</code><code>(get-data store id path)</code><code>(get-data store id path not-found)</code></div><div class="doc"><div class="markdown"><p>Retrieve the data for the identified node. Returns the node’s data body.</p>
<p>The id may be any <code>link/Target</code> value. If a <code>path</code> is given, each slash separated segment is used to recursively look up nodes in the graph by walking the corresponding named links.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L135">view source</a></div></div><div class="public anchor" id="var-get-links"><h3>get-links</h3><div class="usage"><code>(get-links store id)</code><code>(get-links store id path)</code><code>(get-links store id path not-found)</code></div><div class="doc"><div class="markdown"><p>Retrieve the links for the identified node. Returns the node’s link table as a vector of <code>MerkleLink</code> values, or <code>not-found</code>.</p>
<p>The id may be any <code>link/Target</code> value. If a <code>path</code> is given, each slash separated segment is used to recursively look up nodes in the graph by walking the corresponding named links.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L117">view source</a></div></div><div class="public anchor" id="var-get-node"><h3>get-node</h3><div class="usage"><code>(get-node store id)</code><code>(get-node store id path)</code><code>(get-node store id path not-found)</code></div><div class="doc"><div class="markdown"><p>Retrieve the identified node from the store. Returns a node map, or <code>not-found</code> if the node was not found.</p>
<p>The id may be any <code>link/Target</code> value. If a <code>path</code> is given, each slash separated segment is used to recursively look up nodes in the graph by walking the corresponding named links.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L98">view source</a></div></div><div class="public anchor" id="var-init-store"><h3>init-store</h3><div class="usage"><code>(init-store &amp; {:as opts})</code></div><div class="doc"><div class="markdown"><p>Constructs a new node store with default values.</p>
<p>Options may include:</p>
<ul>
  <li><code>:codecs</code>  Codec to serialize nodes with. Defaults to an EDN codec with basic types.</li>
  <li><code>:encoding</code>  Choice of codecs to use to encode new nodes into blocks.</li>
  <li><code>:store</code>  Block store to persist nodes to. Defaults to an in-memory store.</li>
  <li><code>:cache</code>  Map of options to supply to construct a node cache. See  <code>merkledag.node.cache/node-cache</code> for options.</li>
</ul></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L38">view source</a></div></div><div class="public anchor" id="var-link"><h3>link</h3><div class="usage"><code>(link link-name target)</code></div><div class="doc"><div class="markdown"><p>Construct a new merkle link to the given target value.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L23">view source</a></div></div><div class="public anchor" id="var-link.3F"><h3>link?</h3><div class="usage"><code>(link? x)</code></div><div class="doc"><div class="markdown"><p>Predicate which returns true if the argument is a <code>MerkleLink</code> object.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L17">view source</a></div></div><div class="public anchor" id="var-node*"><h3>node*</h3><div class="usage"><code>(node* store links data)</code></div><div class="doc"><div class="markdown"><p>Construct a new merkle node by serializing it to a block.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L29">view source</a></div></div><div class="public anchor" id="var-store-node.21"><h3>store-node!</h3><div class="usage"><code>(store-node! store node)</code><code>(store-node! store links data)</code></div><div class="doc"><div class="markdown"><p>Create a new node by serializing the links and data. Returns the stored node map, or nil if both links and data are nil.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L152">view source</a></div></div><div class="public anchor" id="var-update-link"><h3>update-link</h3><div class="usage"><code>(update-link node new-link)</code></div><div class="doc"><div class="markdown"><p>Returns an updated node map with the given link added, replacing any existing link with the same name. Returns a map with <code>:merkledag.node/links</code> and <code>:merkledag.node/data</code> values.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L187">view source</a></div></div><div class="public anchor" id="var-update-node"><h3>update-node</h3><div class="usage"><code>(update-node store node links)</code><code>(update-node store node links f &amp; args)</code></div><div class="doc"><div class="markdown"><p>Updates the given node by substituting in the given links and potentially running a function to update the body. If the given links have names, and links with matching names exist in the current node, they will be replaced with the new links. Otherwise, the links will be appended to the table.</p>
<p>Returns an updated node map.</p></div></div><div class="src-link"><a href="https://github.com/greglook/merkledag-core/blob/master/src/merkledag/core.clj#L206">view source</a></div></div></div></body></html>